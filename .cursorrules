# Atlas V1 Golden Standard Development Rules

## ğŸ¯ **Tier Enforcement Rules**

### **ALWAYS Use Centralized Tier Logic**
- âœ… ALWAYS import and use `useTierAccess` for feature gating
- âœ… ALWAYS import and use `useFeatureAccess` for specific feature checks
- âœ… ALWAYS import and use `useMessageLimit` for message limits
- âŒ NEVER hardcode `tier === "free"` or similar checks inside components
- âŒ NEVER create duplicate tier logic in components

### **Feature Access Pattern**
```typescript
// âœ… CORRECT: Use centralized hooks
import { useFeatureAccess } from '@/hooks/useTierAccess';

const { canUse, attemptFeature } = useFeatureAccess('audio');
const allowed = await attemptFeature();

// âŒ WRONG: Hardcoded checks
if (userTier === 'free') {
  // Don't do this
}
```

### **Model Routing Rules**
- âœ… ALWAYS use `claudeModelName` from `useTierAccess()` for Claude API calls
- âœ… ALWAYS check `tierFeatures` config for model mapping
- âŒ NEVER hardcode model names in components

### **Upgrade Flow Rules**
- âœ… ALWAYS trigger upgrade modal via `showUpgradeModal()` from `useTierAccess`
- âœ… ALWAYS use Paddle checkout for upgrades
- âœ… ALWAYS log feature attempts via `logFeatureAttempt()`

## ğŸ—ï¸ **Architecture Rules**

### **File Organization**
- âœ… Keep tier logic in `src/config/featureAccess.ts`
- âœ… Keep hooks in `src/hooks/useTierAccess.ts`
- âœ… Keep integration examples in `ATLAS_TIER_INTEGRATION_GUIDE.md`

### **Database Rules**
- âœ… ALWAYS use `feature_attempts` table for telemetry
- âœ… ALWAYS check `feature_flags` for remote feature control
- âœ… ALWAYS use RLS policies for data security

## ğŸš« **What NOT to Build (V1)**

### **Deferred Features**
- âŒ Voice/audio processing (expensive, V2+)
- âŒ Image analysis (expensive, V2+)
- âŒ Complex analytics dashboards (V2+)
- âŒ Enterprise features
- âŒ Generic wellness widgets

### **V1 Focus Only**
- âœ… Text chat with tier enforcement
- âœ… Simple habit logging
- âœ… Daily EQ challenges
- âœ… Basic subscription management

## ğŸ¯ **Atlas Identity Rules**

### **Core Product Identity**
- âœ… Atlas is an **emotionally intelligent AI assistant**
- âœ… Focus on **emotional intelligence coaching**
- âœ… **3-tier system**: Free ($0) â†’ Core ($19.99) â†’ Studio ($179.99)
- âŒ NOT a generic chat app with wellness widgets

### **Tier Value Proposition**
- **Free**: 15 messages/month, Claude Haiku, basic tips
- **Core**: Unlimited chat, Claude Sonnet, voice/image features
- **Studio**: Unlimited chat, Claude Opus, advanced features

## ğŸ”§ **Development Workflow**

### **Before Making Changes**
1. âœ… Pull latest git: `git pull origin main`
2. âœ… Check existing tier logic in `featureAccess.ts`
3. âœ… Use existing hooks from `useTierAccess.ts`

### **When Adding Features**
1. âœ… Check if feature is allowed in V1 scope
2. âœ… Add tier enforcement using centralized hooks
3. âœ… Test with all three tiers (free/core/studio)
4. âœ… Log feature attempts for analytics

### **Code Review Checklist**
- [ ] Uses `useTierAccess` or related hooks
- [ ] No hardcoded tier checks
- [ ] Proper upgrade flow integration
- [ ] Feature attempts logged
- [ ] Follows Atlas V1 scope

## ğŸ“Š **Success Metrics**

### **V1 Launch Criteria**
- [ ] Tier enforcement works across all components
- [ ] Message limits enforced (15 for Free)
- [ ] Feature restrictions work (audio/image for Free)
- [ ] Model routing works (Haiku/Sonnet/Opus)
- [ ] Upgrade flows functional
- [ ] API costs controlled per tier

---

**Remember: Atlas is an emotionally intelligent AI assistant, not a generic chat app. Build the conversation interface first, add habit tracking, enforce the tier system, then iterate toward advanced features in future versions.**
